<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign Up / Log In | CCLA</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <style>
        /* 登录/注册容器居中和样式 */
        .auth-container {
            max-width: 450px;
            margin: 50px auto;
            padding: 40px;
            background: var(--white);
            border-radius: 10px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        /* 切换按钮组样式 */
        .tab-switcher {
            display: flex;
            margin-bottom: 30px;
            border-radius: 5px;
            overflow: hidden;
            border: 1px solid #ddd;
        }

        .tab-switcher button {
            flex-grow: 1;
            padding: 12px;
            border: none;
            background: var(--light-bg);
            cursor: pointer;
            font-size: 1.1rem;
            transition: var(--transition);
        }

        .tab-switcher button.active {
            background: var(--primary-color);
            color: var(--white);
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        /* 表单输入框样式 */
        .form-group {
            margin-bottom: 15px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
            color: var(--secondary-color);
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 5px;
            transition: border-color 0.3s;
            font-size: 1rem;
        }

        .form-group input:focus {
            border-color: var(--primary-color);
            outline: none;
        }

        /* 提交按钮 */
        .btn-submit {
            width: 100%;
            padding: 15px;
            margin-top: 20px;
            background: var(--secondary-color);
            color: var(--white);
            border: none;
            border-radius: 5px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: background 0.3s;
        }

        .btn-submit:hover {
            background: var(--primary-color);
        }
        
        /* 隐藏注册表单中的确认密码字段，直到注册模式被激活 */
        #confirm-password-group {
            display: none;
        }

        .error-message {
            color: red;
            font-size: 0.9rem;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <nav class="navbar">
    <a href="index.html"><i class="fas fa-home"></i> Home</a>
    <a href="About.HTML"><i class="fas fa-info-circle"></i> About</a>
    <a href="Project.html"><i class="fas fa-project-diagram"></i> Features</a>
    <a href="Contact.html"><i class="fas fa-envelope"></i> Contact</a>
</nav>

    <div class="container animate__animated animate__fadeIn">
        
        <div class="auth-container animate__animated animate__zoomIn">
            
            <h1 id="auth-title">Log In to CCLA</h1>

            <div class="tab-switcher">
                <button id="login-tab" class="active">Log In</button>
                <button id="signup-tab">Sign Up</button>
            </div>

            <form id="auth-form">
                
                <div id="name-group" class="form-group" style="display: none;">
                    <label for="username"><i class="fas fa-user"></i> Full Name</label>
                    <input type="text" id="username" name="username" placeholder="Enter your full name">
                </div>
                
                <div class="form-group">
                    <label for="email"><i class="fas fa-envelope"></i> Email Address</label>
                    <input type="email" id="email" name="email" placeholder="Enter your email" required>
                </div>
                
                <div class="form-group">
                    <label for="password"><i class="fas fa-lock"></i> Password</label>
                    <input type="password" id="password" name="password" placeholder="Enter your password" required minlength="6">
                </div>
                
                <div id="confirm-password-group" class="form-group">
                    <label for="confirm-password"><i class="fas fa-lock"></i> Confirm Password</label>
                    <input type="password" id="confirm-password" name="confirm-password" placeholder="Confirm your password">
                    <div id="password-match-error" class="error-message" style="display: none;">Passwords do not match.</div>
                </div>
                
                <button type="submit" class="btn-submit" id="submit-button">
                    <i class="fas fa-sign-in-alt"></i> Log In
                </button>
            </form>

        </div>
    </div> 
    
    <footer style="background: var(--secondary-color); color: white; padding: 40px 0; margin-top: 60px;">
        <div class="container text-center">
            <p>&copy; 2024 CCLA - Cross-Cultural Living Assistant. All rights reserved.</p>
        </div>
    </footer>

    <script>
        const form = document.getElementById('auth-form');
        const loginTab = document.getElementById('login-tab');
        const signupTab = document.getElementById('signup-tab');
        const authTitle = document.getElementById('auth-title');
        const submitButton = document.getElementById('submit-button');
        
        const nameGroup = document.getElementById('name-group');
        const usernameInput = document.getElementById('username');
        const confirmPasswordGroup = document.getElementById('confirm-password-group');
        const confirmPasswordInput = document.getElementById('confirm-password');
        const passwordInput = document.getElementById('password');
        const passwordMatchError = document.getElementById('password-match-error');

        let isLoginMode = true;

        // 切换到登录模式
        function switchToLogin() {
            isLoginMode = true;
            loginTab.classList.add('active');
            signupTab.classList.remove('active');
            authTitle.textContent = 'Log In to CCLA';
            submitButton.innerHTML = '<i class="fas fa-sign-in-alt"></i> Log In';
            
            // 隐藏注册相关字段
            nameGroup.style.display = 'none';
            usernameInput.required = false;
            confirmPasswordGroup.style.display = 'none';
            confirmPasswordInput.required = false;
            passwordMatchError.style.display = 'none';
        }

        // 切换到注册模式
        function switchToSignup() {
            isLoginMode = false;
            signupTab.classList.add('active');
            loginTab.classList.remove('active');
            authTitle.textContent = 'Sign Up for CCLA';
            submitButton.innerHTML = '<i class="fas fa-user-plus"></i> Create Account';

            // 显示注册相关字段
            nameGroup.style.display = 'block';
            usernameInput.required = true;
            confirmPasswordGroup.style.display = 'block';
            confirmPasswordInput.required = true;
        }

        // 绑定切换事件
        loginTab.addEventListener('click', switchToLogin);
        signupTab.addEventListener('click', switchToSignup);
        
        // 密码实时验证
        function validatePasswords() {
            if (!isLoginMode) {
                if (passwordInput.value !== confirmPasswordInput.value) {
                    passwordMatchError.style.display = 'block';
                    confirmPasswordInput.setCustomValidity("Passwords don't match");
                    return false;
                } else {
                    passwordMatchError.style.display = 'none';
                    confirmPasswordInput.setCustomValidity('');
                    return true;
                }
            }
            return true;
        }
        
        passwordInput.addEventListener('input', validatePasswords);
        confirmPasswordInput.addEventListener('input', validatePasswords);

        // 表单提交事件处理
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            // 最终检查密码是否匹配
            if (!validatePasswords()) {
                alert('Please ensure passwords match.');
                return;
            }

            if (form.checkValidity()) {
                // 模拟提交过程
                submitButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Processing...';
                submitButton.disabled = true;

                setTimeout(() => {
                    const modeText = isLoginMode ? 'Login' : 'Registration';
                    alert(modeText + ' successful! (This is a demo, no data was actually saved).');
                    form.reset();
                    submitButton.innerHTML = isLoginMode ? '<i class="fas fa-sign-in-alt"></i> Log In' : '<i class="fas fa-user-plus"></i> Create Account';
                    submitButton.disabled = false;
                    
                    // 注册成功后切换回登录界面 (常见用户体验)
                    if (!isLoginMode) {
                       switchToLogin();
                    }
                }, 1500);
            } else {
                alert('Please fill in all required fields correctly.');
                // 触发 HTML5 原生错误提示
                form.reportValidity();
            }
        });

        // 默认进入登录模式
        switchToLogin();
    </script>
</body>
</html>